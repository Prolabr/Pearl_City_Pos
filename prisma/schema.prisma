generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model CustomerReceipt {
  id                      BigInt   @id @default(autoincrement())
  permitNo                String   @default("DEF/RD/6000")
  serialNumber            String   @unique
  receiptDate             DateTime
  customerName            String?
  nicPassport             String?
  sourceOfForeignCurrency String?
  remarks                 String?
  createdAt               DateTime @default(now())

  currencies              CustomerReceiptCurrency[]
  pdfs                    ReceiptPDF[]
}

model CustomerReceiptCurrency {
  id             BigInt   @id @default(autoincrement())
  receipt         CustomerReceipt @relation(fields: [receiptId], references: [id])
  receiptId       BigInt
  currencyType    String
  amountFcy       Decimal  @db.Decimal(18,4) @default(0)
  rateOffered     Decimal  @db.Decimal(18,6) @default(0)
  amountIssuedLkr Decimal  @db.Decimal(18,2) @default(0)
}

model ReceiptPDF {
  id          BigInt   @id @default(autoincrement())
  receiptId   BigInt   @unique
  fileName    String
  filePath    String
  createdAt   DateTime @default(now())

  receipt     CustomerReceipt @relation(fields: [receiptId], references: [id], onDelete: Cascade)
}

